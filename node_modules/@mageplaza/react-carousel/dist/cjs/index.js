"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var o="styles-module_carousel-base__fAKk-",s="styles-module_item-provider__zoGkT",a="styles-module_item-container__7UEw-",l="styles-module_item-tracker__vWRZE",u="styles-module_carousel-arrow__Qz8-s";i(".styles-module_carousel-base__fAKk- {\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\toutline: none;\n\tposition: relative;\n}\n\n.styles-module_item-provider__zoGkT {\n\toverflow: hidden;\n\twidth: 100%;\n\tcursor: pointer;\n}\n\n.styles-module_item-container__7UEw- img {\n\t-webkit-user-select: none;\n\t        user-select: none;\n\t-webkit-user-drag: none;\n}\n\n.styles-module_item-tracker__vWRZE {\n\theight: 100%;\n\tdisplay: flex;\n}\n\n.styles-module_carousel-arrow__Qz8-s {\n\tz-index: 1;\n}\n");var c,f=function(e){return n.default.createElement("button",{className:u,onClick:e.onClick,"data-direction":e.direction})};!function(e){e[e.Right=-1]="Right",e[e.Left=1]="Left"}(c||(c={}));var d=function(){function e(e,t){this.arr=e,this.currentIndex=t}return e.prototype.next=function(){var e=this.currentIndex,t=this.arr;return this.currentIndex=e<t.length-1?e+1:0,this.current()},e.prototype.prev=function(){var e=this.currentIndex,t=this.arr;return this.currentIndex=e>0&&e<t.length?e-1:t.length-1,this.current()},e.prototype.current=function(){return this.arr[this.currentIndex]},e}(),h=function(e,t,n){return n*e*t},m=function(e){var t=e.itemCount,n=e.itemsToShow,r=e.infinite,i=e.current,o=e.hideArrows;if(void 0!==o&&o)return{left:!1,right:!1};var s=t>n;return r?{left:s,right:s}:{left:s&&0!==i,right:s&&i+n<t}},g=function(e,t,n){if(!n)return e;for(var r=Array.from(e),i=new d(e,0),o=0;o<t;o++)r.unshift(i.prev());return r};function v(e){return e.nativeEvent instanceof MouseEvent?e.nativeEvent.pageX:e.nativeEvent instanceof TouchEvent?e.nativeEvent.changedTouches[0].pageX:0}function p(e,t,n,r,i){if(n&&n.length<t.length)return g(t,r,i);var o=e.map((function(e){return t.find((function(t){return e.key===t.key}))}));return o.some((function(e){return void 0===e}))?g(t,r,i):o}var w=function(t){var n=e.useState("undefined"==typeof window?0:window.innerWidth),r=n[0],i=n[1];e.useLayoutEffect((function(){var e=function(){var e=r-window.innerWidth;i(window.innerWidth),t(e)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[])},y=function(t){var i=e.useState(200),o=i[0],u=i[1],f=e.useCallback((function(e){if(null!==e){var n=e.getBoundingClientRect().width/t.show;console.log("calculated: ",n),u(n),t.widthCallBack(n)}}),[o,t.show]);t.responsive&&w((function(e){u(o-e)}));var d=e.useState({initial:t.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0}),h=d[0],m=d[1],g=function(e){e.persist(),m(r(r({},h),{isDown:!0,start:v(e),initial:t.transform,finished:!1}))},p=function(e){if(e.persist(),!h.finished){if(Math.abs(h.drag)<o*t.swipeOn)return t.dragCallback(t.transform),m({initial:t.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0});t.slideCallback(h.drag>0?c.Right:c.Left),m(r(r({},h),{drag:0,isDown:!1,finished:!0,pointers:!0}))}},y=function(e){if(e.persist(),h.isDown){var n=v(e);m(r(r({},h),{drag:h.start-n,pointers:Math.abs(h.start-n)<t.triggerClickOn}))}},_=t.swiping?{onTouchCancel:p,onTouchEnd:p,onTouchMove:y,onTouchStart:g,onMouseDown:g,onMouseLeave:p,onMouseUp:p,onMouseMove:y}:{};return n.default.createElement("div",{ref:f,className:s},n.default.createElement("div",r({"data-testid":"trackList"},_,{className:l,style:{transform:"translateX("+(t.transform-h.drag)+"px)",transition:"transform "+t.transition+"s ease 0s",width:o*t.items.length}}),t.items.map((function(e,t){return n.default.createElement("div",{key:t,style:{width:o,pointerEvents:h.pointers?"all":"none"},className:a},e)}))))},_={children:[],show:1,slide:1,transition:.5,swiping:!1,swipeOn:1,responsive:!1,infinite:!0,className:"",useArrowKeys:!1,a11y:{},dynamic:!1,paginationCallback:null,pageCount:0,rightArrow:null,leftArrow:null,autoSwipe:null,navigation:null,triggerClickOn:Number.MIN_SAFE_INTEGER,hideArrows:!1,onLeftArrowClick:function(){return null},onRightArrowClick:function(){return null}},k="styles-module_carousel-navigation__PsoPT";i(".styles-module_carousel-navigation__PsoPT {\n\tdisplay: flex;\n\tposition: absolute;\n\tbottom: 0;\n}\n");var C=function(e){var t=e.items,r=e.current,i=e.onClick,o=e.factory;return n.default.createElement("div",{className:k},t.map((function(e,t){return n.default.createElement("div",{onMouseOver:function(){return i(t)},key:t},o(r===t))})))},E="styles-module_sliderBase__FDRfp",b="styles-module_slider__m7OIN",L="styles-module_sliding__TamzE";i(".styles-module_sliderBase__FDRfp {\n\twidth: 100%;\n\tposition: relative;\n}\n\n.styles-module_slider__m7OIN {\n\tdisplay: flex;\n\toverflow-x: auto;\n\tscrollbar-width: none; /* Firefox 64 */\n\t-ms-overflow-style: none; /* Internet Explorer 11 */\n}\n\n.styles-module_slider__m7OIN::-webkit-scrollbar {\n\t/** WebKit */\n\tdisplay: none;\n}\n\n.styles-module_slider__m7OIN > * {\n\tflex: 0 0 auto;\n}\n\n.styles-module_sliding__TamzE > * {\n\tpointer-events: none;\n}\n");var R={children:[],className:"",leftIcon:null,rightIcon:null,triggerClickOn:3};exports.Carousel=function(t){var i,s,a,l,u=r(r({},_),t),v=g(u.children,u.navigation?u.children.length-1:u.slide,u.infinite),w=e.useState(v),k=w[0],E=w[1],b=e.useRef(v),L=e.useState(0),R=L[0],S=L[1],x=e.useState({transform:0,transition:0,isSliding:!1}),A=x[0],T=x[1],M=e.useState(0),N=M[0],I=M[1],O=e.useState(m({itemCount:u.children.length,itemsToShow:u.show,infinite:u.infinite,current:N,hideArrows:u.hideArrows})),W=O[0],D=O[1],z=(a=t.children,l=e.useRef(),e.useEffect((function(){l.current=a})),l.current),X=e.useState(0),B=X[0],P=X[1],K=e.useRef(!1),j=e.useRef(null),F=e.useRef(),U="function"==typeof u.navigation;u.dynamic&&e.useEffect((function(){var e=p(b.current,u.children,z,u.slide,u.infinite);E(e),b.current=e,B<u.pageCount&&z&&(null==z?void 0:z.length)<u.children.length&&(Q(c.Right),P(B+1))}),[u.children]),e.useEffect((function(){G()}),[]),e.useEffect((function(){D(m({itemCount:u.children.length,itemsToShow:u.show,infinite:u.infinite,current:N,hideArrows:u.hideArrows}))}),[k]);var G=function(){clearTimeout(F.current),j&&"number"==typeof u.autoSwipe&&u.autoSwipe>u.transition&&(F.current=setTimeout((function(){j.current&&j.current.click()}),u.autoSwipe))},Q=function(e,t){if(!(A.isSliding||e===c.Right&&!W.right||e===c.Left&&!W.left)){if(u.paginationCallback&&e===c.Right&&B<u.pageCount-1&&!K.current)return K.current=!0,void u.paginationCallback(e);var n=u.children,r=function(e,t,n,r){var i=e-r*t;return i<0?n+i:n<=i?i-n:i}(N,u.slide,n.length,e),i="number"==typeof t?t-N:-1*e,o=u.infinite?U?function(e,t,n,r,i,o){var s=function(e,t,n){var r=e+t>=n.length?e+t-n.length:e+t;return r<0?n.length+r:r}(n,i,e),a=Math.floor(t.length/2),l=new d(e,s),u=Array.from(t);switch(+o){case c.Left:for(var f=0;f<a;f++){var h=a-(Math.abs(i)+f)-r;(h<0||!u[h])&&u.unshift(l.current()),l.prev()}break;case c.Right:for(f=0;f<a;f++)u[a+i+f+r]||u.push(l.current()),l.next()}return u}(n,k,r,u.show,i,e):function(e,t,n,r,i,o){var s=new d(e,n),a=Array.from(t);switch(+o){case c.Left:for(var l=i;l>=0;l--)(i-l<0||!a[l-i])&&a.unshift(s.current()),s.prev();break;case c.Right:for(l=0;l<r+i;l++)a[2*i+l]||a.push(s.current()),s.next()}return a}(n,k,r,u.show,u.slide,e):k;u.infinite&&e===c.Right&&(E(o),b.current=o),T({transform:A.transform+Math.abs(i)*h(R,u.slide,e),transition:u.transition,isSliding:!0}),I(U&&"number"==typeof t?t:r),D(m({itemCount:n.length,itemsToShow:u.show,infinite:u.infinite,current:r,hideArrows:u.hideArrows})),setTimeout((function(){if(u.infinite){var n=U?function(e,t,n){return n===c.Left?e.slice(0,t):e.slice(t)}(e===c.Right?b.current:o,function(e,t,n,r){return"number"==typeof e?r===c.Right?e-t+1:n:-1*r}(t,r,i,e),e):function(e,t,n){return n===c.Left?e.slice(0,-1*t):e.slice(t)}(e===c.Right?b.current:o,u.slide,e);E(n),b.current=n}T({transform:u.infinite?h(R,u.navigation?u.children.length-1:u.slide,c.Right):A.transform+h(R,u.slide,e),transition:0,isSliding:!1}),G()}),1e3*u.transition),K.current=!1}};return n.default.createElement("div",r({},u.a11y,{"data-testid":"carousel",tabIndex:0},u.useArrowKeys?{onKeyDown:function(e){37===e.keyCode?Q(c.Left):39===e.keyCode&&Q(c.Right)}}:{},{className:o+" "+u.className}),W.left&&n.default.createElement("div",{onClick:function(){Q(c.Left),u.onLeftArrowClick&&u.onLeftArrowClick()}},null!==(i=u.leftArrow)&&void 0!==i?i:n.default.createElement(f,{direction:"left"})),n.default.createElement(y,r({},u,{transition:A.transition,items:b.current,transform:A.transform,slideCallback:function(e){Q(e)},dragCallback:function(e){T({transform:e,transition:u.transition,isSliding:!1}),setTimeout((function(){return T(r(r({},A),{transition:0}))}),1e3*u.transition)},widthCallBack:function(e){S(e),T({transform:u.infinite?h(e,u.navigation?u.children.length-1:u.slide,c.Right):0,transition:0,isSliding:!1})}})),W.right&&n.default.createElement("div",{onClick:function(){Q(c.Right),u.onRightArrowClick&&u.onRightArrowClick()},ref:j},null!==(s=u.rightArrow)&&void 0!==s?s:n.default.createElement(f,{direction:"right"})),U&&n.default.createElement(C,{factory:u.navigation,items:u.children,current:N,onClick:function(e){N!==e&&Q(e>N?c.Right:c.Left,e)}}))},exports.ScrollingCarousel=function(t){var i=r(r({},R),t),o=i.children,s=i.className,a=i.leftIcon,l=i.rightIcon,u=i.triggerClickOn,f=e.useRef(null),d=e.useState(!1),h=d[0],m=d[1],g=e.useState({startX:0,scrollLeft:0}),v=g[0],p=g[1],w=function(){var e=f.current;return{left:!!e&&e.scrollLeft>0,right:!!e&&e.scrollWidth>e.scrollLeft+e.offsetWidth}},y=e.useState(w()),_=y[0],k=y[1],C=function(e){k(w())},S=e.useCallback((function(e){null!==e&&(Object.defineProperty(f,"current",{value:e}),k(w()),e.addEventListener("scroll",C))}),[f,o]),x=function(e){m(!1),k(w()),f.current.classList.remove(L)},A=function(e){var t=function(e){for(var t,n,r=f.current,i=e===c.Left?r.scrollLeft+r.offsetWidth:r.scrollLeft,o=0,s=0,a=Array.from(r.children);s<a.length;s++){var l=a[s],u=(t=l,n=void 0,n=getComputedStyle(t),t.offsetWidth+(parseInt(n.marginLeft,10)||0)+(parseInt(n.marginRight,10)||0));if((o+=u)>=i){var d=e===c.Left?o-i:u;return(r.offsetWidth-d)*e}}return r.offsetWidth}(e),n=f.current.scrollLeft;T(500,t,n)},T=function(e,t,n){for(var r=0,i=0;r<=e;i++)window.setTimeout(M,r,i*t/100+n),r+=e/100},M=function(e){f.current.scrollLeft=e},N=function(e,t,r){return n.default.createElement("div",{"data-arrow":t,onClick:function(){return A(e)}},null!=r?r:n.default.createElement("button",null))};return n.default.createElement("div",{className:E+" "+s,"data-testid":"carousel"},_.left&&a&&N(c.Right,"left",a),_.right&&l&&N(c.Left,"right",l),n.default.createElement("div",{"data-testid":"sliderList",ref:S,onMouseDown:function(e){m(!0),p({startX:e.pageX-f.current.offsetLeft,scrollLeft:f.current.scrollLeft})},onMouseLeave:x,onMouseUp:x,onMouseMove:function(e){if(h){e.preventDefault();var t=e.pageX-f.current.offsetLeft-v.startX;Math.abs(t)>u&&f.current.classList.add(L),f.current.scrollLeft=v.scrollLeft-t}},className:b},o))};
