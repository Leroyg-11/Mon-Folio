import t,{useRef as n,useEffect as e,useState as r,useLayoutEffect as i,useCallback as o}from"react";var s=function(){return(s=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function l(t,n){void 0===n&&(n={});var e=n.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===e&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var a="styles-module_carousel-base__fAKk-",c="styles-module_item-provider__zoGkT",u="styles-module_item-container__7UEw-",f="styles-module_item-tracker__vWRZE",d="styles-module_carousel-arrow__Qz8-s";l(".styles-module_carousel-base__fAKk- {\n\twidth: 100%;\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\toutline: none;\n\tposition: relative;\n}\n\n.styles-module_item-provider__zoGkT {\n\toverflow: hidden;\n\twidth: 100%;\n\tcursor: pointer;\n}\n\n.styles-module_item-container__7UEw- img {\n\t-webkit-user-select: none;\n\t        user-select: none;\n\t-webkit-user-drag: none;\n}\n\n.styles-module_item-tracker__vWRZE {\n\theight: 100%;\n\tdisplay: flex;\n}\n\n.styles-module_carousel-arrow__Qz8-s {\n\tz-index: 1;\n}\n");var h,m=function(n){return t.createElement("button",{className:d,onClick:n.onClick,"data-direction":n.direction})};!function(t){t[t.Right=-1]="Right",t[t.Left=1]="Left"}(h||(h={}));var g=function(){function t(t,n){this.arr=t,this.currentIndex=n}return t.prototype.next=function(){var t=this.currentIndex,n=this.arr;return this.currentIndex=t<n.length-1?t+1:0,this.current()},t.prototype.prev=function(){var t=this.currentIndex,n=this.arr;return this.currentIndex=t>0&&t<n.length?t-1:n.length-1,this.current()},t.prototype.current=function(){return this.arr[this.currentIndex]},t}(),v=function(t,n,e){return e*t*n},w=function(t){var n=t.itemCount,e=t.itemsToShow,r=t.infinite,i=t.current,o=t.hideArrows;if(void 0!==o&&o)return{left:!1,right:!1};var s=n>e;return r?{left:s,right:s}:{left:s&&0!==i,right:s&&i+e<n}},p=function(t,n,e){if(!e)return t;for(var r=Array.from(t),i=new g(t,0),o=0;o<n;o++)r.unshift(i.prev());return r};function y(t){return t.nativeEvent instanceof MouseEvent?t.nativeEvent.pageX:t.nativeEvent instanceof TouchEvent?t.nativeEvent.changedTouches[0].pageX:0}function _(t,n,e,r,i){if(e&&e.length<n.length)return p(n,r,i);var o=t.map((function(t){return n.find((function(n){return t.key===n.key}))}));return o.some((function(t){return void 0===t}))?p(n,r,i):o}var k=function(t){var n=r("undefined"==typeof window?0:window.innerWidth),e=n[0],o=n[1];i((function(){var n=function(){var n=e-window.innerWidth;o(window.innerWidth),t(n)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[])},C=function(n){var e=r(200),i=e[0],l=e[1],a=o((function(t){if(null!==t){var e=t.getBoundingClientRect().width/n.show;console.log("calculated: ",e),l(e),n.widthCallBack(e)}}),[i,n.show]);n.responsive&&k((function(t){l(i-t)}));var d=r({initial:n.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0}),m=d[0],g=d[1],v=function(t){t.persist(),g(s(s({},m),{isDown:!0,start:y(t),initial:n.transform,finished:!1}))},w=function(t){if(t.persist(),!m.finished){if(Math.abs(m.drag)<i*n.swipeOn)return n.dragCallback(n.transform),g({initial:n.transform,start:0,isDown:!1,drag:0,finished:!0,pointers:!0});n.slideCallback(m.drag>0?h.Right:h.Left),g(s(s({},m),{drag:0,isDown:!1,finished:!0,pointers:!0}))}},p=function(t){if(t.persist(),m.isDown){var e=y(t);g(s(s({},m),{drag:m.start-e,pointers:Math.abs(m.start-e)<n.triggerClickOn}))}},_=n.swiping?{onTouchCancel:w,onTouchEnd:w,onTouchMove:p,onTouchStart:v,onMouseDown:v,onMouseLeave:w,onMouseUp:w,onMouseMove:p}:{};return t.createElement("div",{ref:a,className:c},t.createElement("div",s({"data-testid":"trackList"},_,{className:f,style:{transform:"translateX("+(n.transform-m.drag)+"px)",transition:"transform "+n.transition+"s ease 0s",width:i*n.items.length}}),n.items.map((function(n,e){return t.createElement("div",{key:e,style:{width:i,pointerEvents:m.pointers?"all":"none"},className:u},n)}))))},E={children:[],show:1,slide:1,transition:.5,swiping:!1,swipeOn:1,responsive:!1,infinite:!0,className:"",useArrowKeys:!1,a11y:{},dynamic:!1,paginationCallback:null,pageCount:0,rightArrow:null,leftArrow:null,autoSwipe:null,navigation:null,triggerClickOn:Number.MIN_SAFE_INTEGER,hideArrows:!1,onLeftArrowClick:function(){return null},onRightArrowClick:function(){return null}},L="styles-module_carousel-navigation__PsoPT";l(".styles-module_carousel-navigation__PsoPT {\n\tdisplay: flex;\n\tposition: absolute;\n\tbottom: 0;\n}\n");var b=function(n){var e=n.items,r=n.current,i=n.onClick,o=n.factory;return t.createElement("div",{className:L},e.map((function(n,e){return t.createElement("div",{onMouseOver:function(){return i(e)},key:e},o(r===e))})))},A=function(i){var o,l,c,u,f=s(s({},E),i),d=p(f.children,f.navigation?f.children.length-1:f.slide,f.infinite),y=r(d),k=y[0],L=y[1],A=n(d),R=r(0),x=R[0],T=R[1],N=r({transform:0,transition:0,isSliding:!1}),I=N[0],M=N[1],S=r(0),O=S[0],W=S[1],D=r(w({itemCount:f.children.length,itemsToShow:f.show,infinite:f.infinite,current:O,hideArrows:f.hideArrows})),z=D[0],X=D[1],B=(c=i.children,u=n(),e((function(){u.current=c})),u.current),K=r(0),P=K[0],F=K[1],U=n(!1),j=n(null),G=n(),Q="function"==typeof f.navigation;f.dynamic&&e((function(){var t=_(A.current,f.children,B,f.slide,f.infinite);L(t),A.current=t,P<f.pageCount&&B&&(null==B?void 0:B.length)<f.children.length&&(q(h.Right),F(P+1))}),[f.children]),e((function(){Z()}),[]),e((function(){X(w({itemCount:f.children.length,itemsToShow:f.show,infinite:f.infinite,current:O,hideArrows:f.hideArrows}))}),[k]);var Z=function(){clearTimeout(G.current),j&&"number"==typeof f.autoSwipe&&f.autoSwipe>f.transition&&(G.current=setTimeout((function(){j.current&&j.current.click()}),f.autoSwipe))},q=function(t,n){if(!(I.isSliding||t===h.Right&&!z.right||t===h.Left&&!z.left)){if(f.paginationCallback&&t===h.Right&&P<f.pageCount-1&&!U.current)return U.current=!0,void f.paginationCallback(t);var e=f.children,r=function(t,n,e,r){var i=t-r*n;return i<0?e+i:e<=i?i-e:i}(O,f.slide,e.length,t),i="number"==typeof n?n-O:-1*t,o=f.infinite?Q?function(t,n,e,r,i,o){var s=function(t,n,e){var r=t+n>=e.length?t+n-e.length:t+n;return r<0?e.length+r:r}(e,i,t),l=Math.floor(n.length/2),a=new g(t,s),c=Array.from(n);switch(+o){case h.Left:for(var u=0;u<l;u++){var f=l-(Math.abs(i)+u)-r;(f<0||!c[f])&&c.unshift(a.current()),a.prev()}break;case h.Right:for(u=0;u<l;u++)c[l+i+u+r]||c.push(a.current()),a.next()}return c}(e,k,r,f.show,i,t):function(t,n,e,r,i,o){var s=new g(t,e),l=Array.from(n);switch(+o){case h.Left:for(var a=i;a>=0;a--)(i-a<0||!l[a-i])&&l.unshift(s.current()),s.prev();break;case h.Right:for(a=0;a<r+i;a++)l[2*i+a]||l.push(s.current()),s.next()}return l}(e,k,r,f.show,f.slide,t):k;f.infinite&&t===h.Right&&(L(o),A.current=o),M({transform:I.transform+Math.abs(i)*v(x,f.slide,t),transition:f.transition,isSliding:!0}),W(Q&&"number"==typeof n?n:r),X(w({itemCount:e.length,itemsToShow:f.show,infinite:f.infinite,current:r,hideArrows:f.hideArrows})),setTimeout((function(){if(f.infinite){var e=Q?function(t,n,e){return e===h.Left?t.slice(0,n):t.slice(n)}(t===h.Right?A.current:o,function(t,n,e,r){return"number"==typeof t?r===h.Right?t-n+1:e:-1*r}(n,r,i,t),t):function(t,n,e){return e===h.Left?t.slice(0,-1*n):t.slice(n)}(t===h.Right?A.current:o,f.slide,t);L(e),A.current=e}M({transform:f.infinite?v(x,f.navigation?f.children.length-1:f.slide,h.Right):I.transform+v(x,f.slide,t),transition:0,isSliding:!1}),Z()}),1e3*f.transition),U.current=!1}};return t.createElement("div",s({},f.a11y,{"data-testid":"carousel",tabIndex:0},f.useArrowKeys?{onKeyDown:function(t){37===t.keyCode?q(h.Left):39===t.keyCode&&q(h.Right)}}:{},{className:a+" "+f.className}),z.left&&t.createElement("div",{onClick:function(){q(h.Left),f.onLeftArrowClick&&f.onLeftArrowClick()}},null!==(o=f.leftArrow)&&void 0!==o?o:t.createElement(m,{direction:"left"})),t.createElement(C,s({},f,{transition:I.transition,items:A.current,transform:I.transform,slideCallback:function(t){q(t)},dragCallback:function(t){M({transform:t,transition:f.transition,isSliding:!1}),setTimeout((function(){return M(s(s({},I),{transition:0}))}),1e3*f.transition)},widthCallBack:function(t){T(t),M({transform:f.infinite?v(t,f.navigation?f.children.length-1:f.slide,h.Right):0,transition:0,isSliding:!1})}})),z.right&&t.createElement("div",{onClick:function(){q(h.Right),f.onRightArrowClick&&f.onRightArrowClick()},ref:j},null!==(l=f.rightArrow)&&void 0!==l?l:t.createElement(m,{direction:"right"})),Q&&t.createElement(b,{factory:f.navigation,items:f.children,current:O,onClick:function(t){O!==t&&q(t>O?h.Right:h.Left,t)}}))},R="styles-module_sliderBase__FDRfp",x="styles-module_slider__m7OIN",T="styles-module_sliding__TamzE";l(".styles-module_sliderBase__FDRfp {\n\twidth: 100%;\n\tposition: relative;\n}\n\n.styles-module_slider__m7OIN {\n\tdisplay: flex;\n\toverflow-x: auto;\n\tscrollbar-width: none; /* Firefox 64 */\n\t-ms-overflow-style: none; /* Internet Explorer 11 */\n}\n\n.styles-module_slider__m7OIN::-webkit-scrollbar {\n\t/** WebKit */\n\tdisplay: none;\n}\n\n.styles-module_slider__m7OIN > * {\n\tflex: 0 0 auto;\n}\n\n.styles-module_sliding__TamzE > * {\n\tpointer-events: none;\n}\n");var N={children:[],className:"",leftIcon:null,rightIcon:null,triggerClickOn:3},I=function(e){var i=s(s({},N),e),l=i.children,a=i.className,c=i.leftIcon,u=i.rightIcon,f=i.triggerClickOn,d=n(null),m=r(!1),g=m[0],v=m[1],w=r({startX:0,scrollLeft:0}),p=w[0],y=w[1],_=function(){var t=d.current;return{left:!!t&&t.scrollLeft>0,right:!!t&&t.scrollWidth>t.scrollLeft+t.offsetWidth}},k=r(_()),C=k[0],E=k[1],L=function(t){E(_())},b=o((function(t){null!==t&&(Object.defineProperty(d,"current",{value:t}),E(_()),t.addEventListener("scroll",L))}),[d,l]),A=function(t){v(!1),E(_()),d.current.classList.remove(T)},I=function(t){var n=function(t){for(var n,e,r=d.current,i=t===h.Left?r.scrollLeft+r.offsetWidth:r.scrollLeft,o=0,s=0,l=Array.from(r.children);s<l.length;s++){var a=l[s],c=(n=a,e=void 0,e=getComputedStyle(n),n.offsetWidth+(parseInt(e.marginLeft,10)||0)+(parseInt(e.marginRight,10)||0));if((o+=c)>=i){var u=t===h.Left?o-i:c;return(r.offsetWidth-u)*t}}return r.offsetWidth}(t),e=d.current.scrollLeft;M(500,n,e)},M=function(t,n,e){for(var r=0,i=0;r<=t;i++)window.setTimeout(S,r,i*n/100+e),r+=t/100},S=function(t){d.current.scrollLeft=t},O=function(n,e,r){return t.createElement("div",{"data-arrow":e,onClick:function(){return I(n)}},null!=r?r:t.createElement("button",null))};return t.createElement("div",{className:R+" "+a,"data-testid":"carousel"},C.left&&c&&O(h.Right,"left",c),C.right&&u&&O(h.Left,"right",u),t.createElement("div",{"data-testid":"sliderList",ref:b,onMouseDown:function(t){v(!0),y({startX:t.pageX-d.current.offsetLeft,scrollLeft:d.current.scrollLeft})},onMouseLeave:A,onMouseUp:A,onMouseMove:function(t){if(g){t.preventDefault();var n=t.pageX-d.current.offsetLeft-p.startX;Math.abs(n)>f&&d.current.classList.add(T),d.current.scrollLeft=p.scrollLeft-n}},className:x},l))};export{A as Carousel,I as ScrollingCarousel};
